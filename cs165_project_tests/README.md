# CS165 Course Project Tests

This directory holds scripts for generating data and tests, based off of the test suite from the CS165 course project.

## Contents

| Name | Description |
|-|-|
| `/data_generation_scripts` | a directory of the original Python scripts that generate test data from the CS165 project |
| `/original_bash_scripts` | a directory of the original bash scripts from the CS165 project |
| `setup.sh` | a Python setup script |
| `gen_all_for_staff_use.sh` | a script for data and query file generation; uses scripts in `/data_generation_scripts` |
| `test_milestone.sh` | a script for running test suites for milestones from the original CS165 project; uses `run_test.sh` |
| `run_test.sh` | a script for running individual tests from the original CS165 project; uses `verify_output_standalone.sh` |
| `verify_output_standalone.sh` | a script for cleaning query output and `diff`ing with expected output |

## Setup

1. Install Python 3.
1. Create a Python 3 virtual environment.
1. Install Python dependencies into the virtual environment, as listed in the file `requirements.txt`.

A handy setup script completes all the setup steps above, but it has only been tested on a Debian 10 operating system.

You can run the setup script by running the following command (from within this `cs165_project_test` directory).
```bash
./setup.sh
```

## Generating Data

The Python scripts in `/data_generation_scripts` will produce three kinds of output.

1. data files (`.csv`)
1. query commands (`.dsl`)
1. expected output files (`.exp`)

The script `gen_all_for_bobs_use.sh` will create a directory `/generated_data` to hold the generated output.

You can run the data generation script by running the following command (from within this `cs165_project_test` directory).
```bash
./gen_all_for_bobs_use.sh
```

## Testing



---

# Original README content from CS165 course project
Example instructions for how to generate some data for all milestones
you may need to change the scale of the data in the shell script etc.

`./gen_all_for_staff_use.sh ~/repo/cs165-docker-test-runner/test_data`

This will generate some *.csv, *.dsl and *.exp files in the directory you specified to the shell script.


To run the tests (in Docker), you can pass dsl files directly to your client. 
The following command passes test00.dsl file to the client executable and stores the output in test00.out: `./client < test00.dsl > test00.out`
After successful execution of the above command, you can see the difference between test00.out and test00.exp using the following command: `./diff -B -w test00.out test00.exp`
More information about format of the output generated by the command above can be found here: https://www.gnu.org/software/diffutils/manual/html_node/Side-by-Side.html
